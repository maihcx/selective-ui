<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, interactive-widget=resizes-content">

    <title>Document</title>

    <link rel="stylesheet" href="../dist/selective-ui.min.css">
    <script src="../dist/selective-ui.min.js"></script>
</head>
<body>
    <div style="height: 200px;"></div>
    <div id="selectpanel">
        <select class="selectui" name="selectui" id="selectui" data-width="200px" data-placeholder="Ch·ªçn d·ªØ li·ªáu" data-max-selected="3" multiple>
            <optgroup label="Fruits">
                <option value="apple">Apple üçé</option>
                <option value="banana">Banana üçå</option>
                <option value="orange">Orange üçä</option>
            </optgroup>
            
            <optgroup label="Vegetables" data-collapsed="true">
                <option value="carrot">Carrot ü•ï</option>
                <option value="lettuce">Lettuce ü•¨</option>
                <option value="tomato">Tomato üçÖ</option>
            </optgroup>

            <option value="test">test</option>
        </select>
        <select class="selectui" name="selectui1" id="selectui1" data-width="200px">
            <option value="1">ver 1</option>
            <option value="2">ver 2</option>
            <option value="3">ver 3</option>
            <option value="4">ver 4</option>
            <option value="5">ver 5</option>
            <option value="6">ver 6</option>
            <option value="7">ver 7</option>
        </select>
    </div>
    <button onclick="changeVal()">change!</button>
    <script>
        // T·∫°o n√∫t
        SelectiveUI.bind(".selectui", {on: {
            load(event, handle) {
                SelectiveUI.find("#selectui1")
                .on("beforeShow", (evtToken, sel) => {
                    console.log("start open");
                }).on("show", (evtToken, sel) => {
                    console.log("open completed");
                }).on("beforeClose", (evtToken, el) => {
                    console.log("start close");
                }).on("close", (evtToken, el) => {
                    console.log("close completed");
                }).on("beforeChange", (evtToken, el, value) => {
                    if (el.valueArray.some(v => v == 2)) {
                        evtToken.cancel();
                        console.log("data cancel");
                    }
                }).on("change", (evtToken, el, value) => {
                    console.log(`changed: ${value}`);
                });
            }
        }});
        window.onload = () => {
            
        }

        function changeVal() {
            // SelectiveUI.find("#selectui1").value = 2;
            // console.log(SelectiveUI.find("#selectui1").value);
            
            // const selNode = document.createElement("select");
            // selNode.classList.add("selectui");
            // selNode.dataset.width = "110px";
            // setTimeout(() => {
            //     const opt = document.createElement("option");
            //     opt.value = "test1";
            //     opt.text = "test option";
            //     selNode.appendChild(opt);

            //     setTimeout(() => {
            //         const opt2 = document.createElement("option");
            //         opt2.value = "test2";
            //         opt2.text = "test option 2";
            //         selNode.appendChild(opt2);
            //     }, 5000);
            // }, 5000);
            // document.getElementById("selectpanel").appendChild(selNode);

            let dumpingOptions = '';
            for (let i = 1; i <= 1000; i++) {
                dumpingOptions += `<option value="${i}" data-imgsrc="https://haenglish.edu.vn/wp-content/uploads/2023/10/Screenshot-2023-10-25-105259.png">ver ${i}</option>`;
            }

            document.getElementById("selectui1").innerHTML = dumpingOptions;
        }
    </script>
</body>
</html>
